  - platform: haveibeenpwned
    email: 
      - !secret email1
      - !secret email2

  - platform: pi_hole
    host: !secret pihole_dns

  - platform: buienradar
    name: Annen
    latitude: !secret latitude
    longitude: !secret longitude
    monitored_conditions:
      # current condition:
      - condition
      - conditioncode
      - conditiondetailed
      - conditionexact
      - symbol
      # conditions for forecasted data:
      - symbol_1d
      - symbol_2d
      - symbol_3d
      - symbol_4d
      - symbol_5d
      - mintemp_1d
      - temperature_1d
      - temperature_2d
      - temperature_3d
      - temperature_4d
      - temperature_5d
      - rainchance_1d
      - rainchance_2d
      - rainchance_3d
      - rainchance_4d
      - rainchance_5d
      - sunchance_1d
      - sunchance_2d
      - sunchance_3d
      - sunchance_4d
      - sunchance_5d
      - rain_1d
      - rain_2d
      - rain_3d
      - rain_4d
      - rain_5d

  - platform: travisci
    api_key: !secret travis_key

  - platform: pi_hole
    host: 192.168.1.26:8053

  - platform: dsmr
    host: 192.168.1.155
    port: 2001
    dsmr_version: 4
  
  - platform: nut
    name: APC UPS
    host: 192.168.1.123
    port: 3493
    resources:
      - ups.status
      - ups.load
      - ups.realpower.nominal
      - input.voltage
      - battery.runtime
      - battery.charge

# mqtt ##############################################################

  - platform: mqtt
    name: "Verbruik wasmachine actueel"
    state_topic: "tele/sonoff_wasmachine/ENERGY"
    value_template: "{{ value_json.Power }}"
    unit_of_measurement: "W"
  - platform: mqtt
    name: "Verbruik wasmachine vandaag"
    state_topic: "tele/sonoff_wasmachine/ENERGY"
    value_template: "{{ value_json.Today }}"
    unit_of_measurement: "kWh"
  - platform: mqtt
    name: "Verbruik wasmachine gisteren"
    state_topic: "tele/sonoff_wasmachine/ENERGY"
    value_template: "{{ value_json.Yesterday }}"
    unit_of_measurement: "kWh"
  - platform: mqtt
    name: "Verbruik droger actueel"
    state_topic: "tele/sonoff_droger/ENERGY"
    value_template: "{{ value_json.Power }}"
    unit_of_measurement: "W"
  - platform: mqtt
    name: "Verbruik droger vandaag"
    state_topic: "tele/sonoff_droger/ENERGY"
    value_template: "{{ value_json.Today }}"
    unit_of_measurement: "kWh"
  - platform: mqtt
    name: "Verbruik droger gisteren"
    state_topic: "tele/sonoff_droger/ENERGY"
    value_template: "{{ value_json.Yesterday }}"
    unit_of_measurement: "kWh"
  - platform: mqtt
    name: "Verbruik koelkast en vriezer actueel"
    state_topic: "tele/koelkast_vriezer/SENSOR"
    value_template: "{{ value_json['ENERGY'].Power}}"
    unit_of_measurement: "W"
  - platform: mqtt
    name: "Verbruik koelkast en vriezer vandaag"
    state_topic: "tele/koelkast_vriezer/SENSOR"
    value_template: "{{ value_json['ENERGY'].Today}}"
    unit_of_measurement: "kWh"
  - platform: mqtt
    name: "Verbruik koelkast en vriezer gisteren"
    state_topic: "tele/koelkast_vriezer/SENSOR"
    value_template: "{{ value_json['ENERGY'].Yesterday}}"
    unit_of_measurement: "kWh"

  - platform: mqtt
    friendly_name: 'Xiaomi Cube'
    state_topic: "zigbee2mqtt/xiaomi_cube"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:gesture-double-tap"
    value_template: "{{ value_json.action }}"
    json_attributes: 
      - "battery"
      - "voltage"
      - "angle"
      - "side"
      - "from_side"
      - "to_side"
      - "brightness"
  
  - platform: "mqtt"
    friendly_name: 'Temperatuur kelder'
    state_topic: "zigbee2mqtt/xiaomi_sensor_kelder"
    availability_topic: "zigbee2mqtt/bridge/state"
    unit_of_measurement: "°C"
    icon: "mdi:temperature-celsius"
    value_template: "{{ value_json.temperature }}"
    json_attributes: 
      - "battery"
      - "voltage"

  - platform: "mqtt"
    friendly_name: 'Luchtvochtigheid kelder'
    state_topic: "zigbee2mqtt/xiaomi_sensor_kelder"
    availability_topic: "zigbee2mqtt/bridge/state"
    unit_of_measurement: "%"
    icon: "mdi:water-percent"
    value_template: "{{ value_json.humidity }}"
    json_attributes: 
      - "battery"
      - "voltage"

  - platform: "mqtt"
    friendly_name: 'Temperatuur slaapkamer'
    state_topic: "zigbee2mqtt/xiaomi_sensor_slaapkamer"
    availability_topic: "zigbee2mqtt/bridge/state"
    unit_of_measurement: "°C"
    icon: "mdi:temperature-celsius"
    value_template: "{{ value_json.temperature }}"
    json_attributes: 
      - "battery"
      - "voltage"

  - platform: "mqtt"
    friendly_name: 'Luchtvochtigheid slaapkamer'
    state_topic: "zigbee2mqtt/xiaomi_sensor_slaapkamer"
    availability_topic: "zigbee2mqtt/bridge/state"
    unit_of_measurement: "%"
    icon: "mdi:water-percent"
    value_template: "{{ value_json.humidity }}"
    json_attributes: 
      - "battery"
      - "voltage"

  


  - platform: postnl
    username: !secret postnl_user
    password: !secret postnl_password
  
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /
      - type: memory_use_percent
      - type: load_1m
      - type: last_boot

  - platform: sql
    db_url: !secret my_db
    queries:
        - name: Database size
          query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1024 / 1024, 1) "value" FROM information_schema.tables WHERE table_schema="ha" GROUP BY table_schema;'
          column: 'value'
          unit_of_measurement: Mb

  - platform: statistics
    name: statistics droger value
    entity_id: sensor.verbruik_droger_actueel

  - platform: statistics
    name: statistics wasmachine value
    entity_id: sensor.verbruik_wasmachine_actueel
  
  - platform: statistics
    name: statistics stroomverbruik huidig
    entity_id: sensor.power_consumption

  - platform: fastdotcom

  - platform: history_stats
    name: PS4 vandaag
    entity_id: media_player.playstation_4
    state: 'playing'
    type: time
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'

  - platform: history_stats
    name: Televisie vandaag
    entity_id: media_player.sony_bravia_tv
    state: 'on'
    type: time
    start: '{{ now().replace(hour=0).replace(minute=0).replace(second=0) }}'
    end: '{{ now() }}'
   
